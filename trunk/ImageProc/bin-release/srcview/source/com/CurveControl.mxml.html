<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>CurveControl.mxml</title>
<link rel="stylesheet" type="text/css" href="../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="MXMLComponent_Tag">&lt;mx:Canvas</span><span class="MXMLDefault_Text">     xmlns:mx=&quot;</span><span class="MXMLString">http://www.adobe.com/2006/mxml</span><span class="MXMLDefault_Text">&quot; 
            xmlns:comp=&quot;</span><span class="MXMLString">com.*</span><span class="MXMLDefault_Text">&quot;
            width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; 
            creationComplete=&quot;</span><span class="ActionScriptDefault_Text">onCreationComplete</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
    
    <span class="MXMLSpecial_Tag">&lt;mx:Metadata&gt;</span>
        <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;change&quot;</span>, <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;flash.events.Event&quot;</span><span class="ActionScriptBracket/Brace">)]</span>    
    <span class="MXMLSpecial_Tag">&lt;/mx:Metadata&gt;</span>
            
    <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
        <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">CumHist</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">geom</span>.<span class="ActionScriptDefault_Text">Point</span>;
            
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 255;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 256;
            
            <span class="ActionScriptComment">// colors for curves
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptDefault_Text">x888888</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptDefault_Text">xFF0000</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptDefault_Text">x00FF00</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptDefault_Text">x0000FF</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">COLOR_ALP</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptDefault_Text">xFF000000</span>;

            <span class="ActionScriptComment">//  curve display bitmap            
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpCumHist</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bmpOverlay</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BitmapData</span>;

            <span class="ActionScriptComment">// current curve on display
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curveRGB</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curveRED</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curveGRN</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curveBLU</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curveALP</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>;
            
            <span class="ActionScriptComment">// interpolation object
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">interpolateRED</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">interpolateGRN</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">interpolateBLU</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">interpolateRGB</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span>;
            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">interpolateALP</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span>;

            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentColor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span>;
        
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onCreationComplete</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span>0,0<span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span>255,255<span class="ActionScriptBracket/Brace">)]</span>;
                <span class="ActionScriptDefault_Text">interpolateRED</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Interpolate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">interpolateGRN</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Interpolate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">interpolateBLU</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Interpolate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">interpolateRGB</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Interpolate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">interpolateALP</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Interpolate</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bounds</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">Color</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>                <span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">clr</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">curve</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">return</span>;
                    
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">table</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveRGB</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CumHist</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveRED</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CumHist</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveGRN</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CumHist</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveBLU</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CumHist</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptDefault_Text">curveALP</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CumHist</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hist</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">drawCumHistogram</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">table</span>, <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">currentColor</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">LUT</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">array</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lut</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">interpolation</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">array</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">getY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">))</span>;
                <span class="ActionScriptBracket/Brace">}</span>    
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">array</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">interpolation</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptReserved">return</span>     <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">interpolateRGB</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">interpolateRED</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">interpolateGRN</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">interpolateBLU</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptDefault_Text">interpolateALP</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">curve</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptReserved">return</span>     <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveRGB</span>.<span class="ActionScriptDefault_Text">table</span> <span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveRED</span>.<span class="ActionScriptDefault_Text">table</span> <span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveGRN</span>.<span class="ActionScriptDefault_Text">table</span> <span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveBLU</span>.<span class="ActionScriptDefault_Text">table</span> <span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_ALP</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">curveALP</span>.<span class="ActionScriptDefault_Text">table</span> <span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptReserved">null</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">colorOpposite</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptReserved">return</span>     <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>0<span class="ActionScriptDefault_Text">xFF0000FF</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>0<span class="ActionScriptDefault_Text">xFF00FFFF</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>0<span class="ActionScriptDefault_Text">xFFFF00FF</span><span class="ActionScriptOperator">:</span>
                        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>0<span class="ActionScriptDefault_Text">xFFFFFF00</span><span class="ActionScriptOperator">:</span>
                        0<span class="ActionScriptDefault_Text">xFF00FF00</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMove</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">InOut</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptReserved">switch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">InOut</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;IN&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">moveIn</span>.<span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">moveIn</span>.<span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptReserved">break</span>;
                    
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">&quot;OUT&quot;</span><span class="ActionScriptOperator">:</span>
                    <span class="ActionScriptDefault_Text">moveOut</span>.<span class="ActionScriptDefault_Text">end</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">moveOut</span>.<span class="ActionScriptDefault_Text">play</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptReserved">break</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

<span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// Image Processing
</span>            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawCurveGrids</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptComment">// draw grid
</span>                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, 0, 1, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">HANNEL_RANGE</span><span class="ActionScriptOperator">/</span>4, 0, 1, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">HANNEL_RANGE</span><span class="ActionScriptOperator">/</span>2, 0, 1, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">HANNEL_RANGE</span><span class="ActionScriptOperator">/</span>4<span class="ActionScriptOperator">*</span>3, 0, 1, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">HANNEL_RANGE</span>, 0, 1, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, 0, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptOperator">/</span>4, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptOperator">/</span>2, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptOperator">/</span>4<span class="ActionScriptOperator">*</span>3, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">drawLUT</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptComment">// Draws the adjustable look up table on the overlay bitmap
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawLUT</span><span class="ActionScriptBracket/Brace">(</span>    <span class="ActionScriptDefault_Text">ptHL</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>,
                                        <span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>     
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">bmpOverlay</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">dispose</span><span class="ActionScriptBracket/Brace">()</span>;
                    
                <span class="ActionScriptDefault_Text">bmpOverlay</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BitmapData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">width</span>, <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">height</span>, <span class="ActionScriptReserved">true</span>, 0<span class="ActionScriptDefault_Text">xFFFFFF</span><span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lut</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">interpolation</span>;
                
                
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span>0; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>; <span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">getY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">((</span><span class="ActionScriptDefault_Text">ptHL</span><span class="ActionScriptOperator">!=</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">&amp;&amp;</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">==</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ptHL</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>    <span class="ActionScriptComment">// highlight point on LUT if mouse over
</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> 0<span class="ActionScriptDefault_Text">xFFFFFFFF</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">colorOpposite</span> <span class="ActionScriptOperator">+</span> 0<span class="ActionScriptDefault_Text">xFF000000</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">colorOpposite</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">offset</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span> 2<span class="ActionScriptOperator">:</span>1;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>5<span class="ActionScriptOperator">:</span>3;
                        <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ptHL</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">offset</span>, <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ptHL</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">offset</span>, <span class="ActionScriptDefault_Text">size</span>,<span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>                            
                    <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">isAnchorX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">))</span>                <span class="ActionScriptComment">// highlight anchors
</span>                        <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span><span class="ActionScriptOperator">-</span>1, <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">-</span>1,3,3<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptDefault_Text">xFF000000</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">else</span>                                    <span class="ActionScriptComment">// otherwise, draw the curve as usual
</span>                        <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">x</span>, <span class="ActionScriptDefault_Text">bmpOverlay</span>.<span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">y</span><span class="ActionScriptBracket/Brace">)</span>, 1, 1<span class="ActionScriptBracket/Brace">)</span>, 0<span class="ActionScriptDefault_Text">xFF000000</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">imgOverlay</span>.<span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Bitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpOverlay</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">drawCumHistogram</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">curve</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span>, <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">bmpCumHist</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BitmapData</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">HANNEL_RANGE</span>, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span>, <span class="ActionScriptReserved">false</span>, 0<span class="ActionScriptDefault_Text">xFFFFFF</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">max</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">curve</span>.<span class="ActionScriptDefault_Text">Sum</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">factor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span> <span class="ActionScriptOperator">/</span> <span class="ActionScriptDefault_Text">max</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">curve</span>.<span class="ActionScriptDefault_Text">StartPos</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">&lt;=</span><span class="ActionScriptDefault_Text">curve</span>.<span class="ActionScriptDefault_Text">EndPos</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">curve</span>.<span class="ActionScriptDefault_Text">getY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> <span class="ActionScriptDefault_Text">factor</span>;
                    <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">&lt;</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>0<span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">height</span>;
                    <span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">height</span><span class="ActionScriptOperator">&gt;</span>255<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span>255<span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">height</span>;
                    <span class="ActionScriptDefault_Text">bmpCumHist</span>.<span class="ActionScriptDefault_Text">fillRect</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span>, <span class="ActionScriptDefault_Text">CHANNEL_RANGE</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">height</span>, 1, <span class="ActionScriptDefault_Text">height</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptDefault_Text">clr</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptDefault_Text">drawCurveGrids</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">imgCumHist</span>.<span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Bitmap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bmpCumHist</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
<span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// Mouse events
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">onAnchorFocus</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;    <span class="ActionScriptComment">// is an anchor in focus ?
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">anchorFocused</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">null</span>;            <span class="ActionScriptComment">// anchor current in use
</span>            <span class="ActionScriptReserved">protected</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">=</span><span class="ActionScriptReserved">false</span>;
            
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">INTERPOLATE_LINEAR</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;LINEAR&quot;</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">INTERPOLATE_CUBIC_SPLINE</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;CUBIC_SPLINE&quot;</span>;
        
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptComment">// dragging an anchor point
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseMove</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// show statistics
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">curve</span>;
                <span class="ActionScriptDefault_Text">lblIndex</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptComment">//lblCount.text = Point(pts[e.localX-1]).y.toString();
</span>                <span class="ActionScriptDefault_Text">lblCount</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)(</span>255<span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lut</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">interpolation</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">getY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
                
                
                <span class="ActionScriptComment">// during an anchor move
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">onAnchorFocus</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">removeAnchor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">anchorFocused</span>.<span class="ActionScriptDefault_Text">x</span><span class="ActionScriptBracket/Brace">)</span>;                            <span class="ActionScriptComment">// remove this anchor from previous position
</span>                    <span class="ActionScriptDefault_Text">anchorFocused</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span>, <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptBracket/Brace">)</span>;    <span class="ActionScriptComment">// create a new anchor
</span>                    
                    <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">method</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">INTERPOLATE_CUBIC_SPLINE</span>;
                    <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">addAnchor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">anchorFocused</span><span class="ActionScriptBracket/Brace">)</span>;                                <span class="ActionScriptComment">// add it to LUT
</span>                    <span class="ActionScriptDefault_Text">drawLUT</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">anchorFocused</span><span class="ActionScriptBracket/Brace">)</span>;                                        <span class="ActionScriptComment">// draw the new LUT on curveControl
</span>                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptComment">// mouse over
</span>                <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">((</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">+</span>1 <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">-</span>1 <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span> <span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span> 
                    <span class="ActionScriptComment">// bitmap coordinates are backward from our LUT coordinates in Y axis.
</span>                    <span class="ActionScriptDefault_Text">isAnchor</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">isAnchorX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">drawLUT</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span><span class="ActionScriptOperator">-</span>1, <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptBracket/Brace">)</span>, <span class="ActionScriptDefault_Text">isAnchor</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptComment">// moved an anchor point
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">onAnchorFocus</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;change&quot;</span><span class="ActionScriptBracket/Brace">))</span>;
                    <span class="ActionScriptDefault_Text">onAnchorFocus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// --------------------------------------------------------------------------
</span>            <span class="ActionScriptComment">// lock on an anchor point
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onMouseDown</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// --------------------------------------------------------------------------    
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curve</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CumHist</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RGB</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">curveRGB</span><span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_RED</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">curveRED</span><span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_GRN</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">curveGRN</span><span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentColor</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">COLOR_BLU</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptDefault_Text">curveBLU</span><span class="ActionScriptOperator">:</span>
                                    <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">curveALP</span>;
                                    
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">y</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">curve</span>.<span class="ActionScriptDefault_Text">getY</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">((</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptOperator">+</span>1 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">&gt;</span> <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">))</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">onAnchorFocus</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lut</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Interpolate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">this</span>.<span class="ActionScriptDefault_Text">interpolation</span>;
                    <span class="ActionScriptDefault_Text">anchorFocused</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lut</span>.<span class="ActionScriptDefault_Text">getAnchor</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">anchorFocused</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">anchorFocused</span><span class="ActionScriptOperator">==</span><span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">?</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Point</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localX</span>, <span class="ActionScriptDefault_Text">CHANNEL_MAX</span><span class="ActionScriptOperator">-</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">localY</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">:</span> <span class="ActionScriptDefault_Text">anchorFocused</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Move</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">moveOut</span><span class="MXMLDefault_Text">&quot; target=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptReserved">this</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; xFrom=&quot;</span><span class="MXMLString">-257</span><span class="MXMLDefault_Text">&quot; xTo=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; duration=&quot;</span><span class="MXMLString">2000</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Move</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">moveIn</span><span class="MXMLDefault_Text">&quot; target=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptReserved">this</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; xFrom=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; xTo=&quot;</span><span class="MXMLString">-257</span><span class="MXMLDefault_Text">&quot; duration=&quot;</span><span class="MXMLString">2000</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> borderColor=&quot;</span><span class="MXMLString">gray</span><span class="MXMLDefault_Text">&quot; borderStyle=&quot;</span><span class="MXMLString">solid</span><span class="MXMLDefault_Text">&quot; borderThickness=&quot;</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">imgCumHist</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> includeInLayout=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; x=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; y=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">X:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">lblIndex</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> includeInLayout=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; x=&quot;</span><span class="MXMLString">10</span><span class="MXMLDefault_Text">&quot; y=&quot;</span><span class="MXMLString">20</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Y:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">lblCount</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">8</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
    <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">imgOverlay</span><span class="MXMLDefault_Text">&quot; includeInLayout=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;
                     x=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">imgCumHist</span>.<span class="ActionScriptDefault_Text">x</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; y=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">imgCumHist</span>.<span class="ActionScriptDefault_Text">y</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; 
                     width=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">256</span><span class="MXMLDefault_Text">&quot; 
                    mouseMove=&quot;</span><span class="ActionScriptDefault_Text">onMouseMove</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; 
                    mouseDown=&quot;</span><span class="ActionScriptDefault_Text">onMouseDown</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; 
                    mouseUp=&quot;</span><span class="ActionScriptDefault_Text">onMouseUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
<span class="MXMLComponent_Tag">&lt;/mx:Canvas&gt;</span></pre></body>
</html>
